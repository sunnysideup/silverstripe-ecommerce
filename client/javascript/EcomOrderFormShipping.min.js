if(null!==document.getElementById("OrderFormAddress_OrderFormAddress")&&"undefined"!==typeof document.getElementById("OrderFormAddress_OrderFormAddress")){(function(a){a(document).ready(function(){EcomOrderFormWithShippingAddress.init();EcomOrderFormWithShippingAddress.removeEmailFromShippingCityHack()})})(window.jQuery);var EcomOrderFormWithShippingAddress={copy_billing_to_shipping:!1,fieldArray:[],shippingFieldSelectors:"",billingFieldSelectors:"",formSelector:"#OrderFormAddress_OrderFormAddress",shippingSectionSelector:".shippingFieldsHeader, .shippingFields",
useShippingDetailsSelector:"input[name='UseShippingAddress']",useShippingDetailsAlternativeSelector:"input[name='UseDifferentShippingAddress']",billingHeaderAttributeTitleAlternative:"data-title-with-shipping-address",shippingGeoCodingFieldSelector:"input[name='ShippingEcommerceGeocodingField']",countryToUpdateCartClass:"ajaxCountryField",regionToUpdateCartClass:"ajaxRegionField",closed:!1,init:function(){if(0<window.jQuery(EcomOrderFormWithShippingAddress.useShippingDetailsSelector).length){this.getListOfSharedFields();
var a;for(a=0;a<EcomOrderFormWithShippingAddress.fieldArray.length;++a)0<a&&(EcomOrderFormWithShippingAddress.shippingFieldSelectors+=", ",EcomOrderFormWithShippingAddress.billingFieldSelectors+=", "),EcomOrderFormWithShippingAddress.shippingFieldSelectors+=EcomOrderFormWithShippingAddress.shippingFieldSelector(EcomOrderFormWithShippingAddress.fieldArray[a]),EcomOrderFormWithShippingAddress.billingFieldSelectors+=EcomOrderFormWithShippingAddress.billingFieldSelector(EcomOrderFormWithShippingAddress.fieldArray[a]);
0<a&&(EcomOrderFormWithShippingAddress.turnOnListeners(),0<window.jQuery(EcomOrderFormWithShippingAddress.useShippingDetailsAlternativeSelector).length?window.jQuery(EcomOrderFormWithShippingAddress.useShippingDetailsAlternativeSelector).change():window.jQuery(EcomOrderFormWithShippingAddress.useShippingDetailsSelector).change())}window.jQuery(EcomOrderFormWithShippingAddress.shippingGeoCodingFieldSelector).removeAttr("required")},updateFields:function(){for(var a=this.hasShippingAddress(),b,c,d,e=0;e<EcomOrderFormWithShippingAddress.fieldArray.length;++e)b=
EcomOrderFormWithShippingAddress.billingFieldSelector(EcomOrderFormWithShippingAddress.fieldArray[e]),c=EcomOrderFormWithShippingAddress.shippingFieldSelector(EcomOrderFormWithShippingAddress.fieldArray[e]),b=window.jQuery(b),c=window.jQuery(c),!0===a?(b.hasClass(EcomOrderFormWithShippingAddress.countryToUpdateCartClass)&&(b.removeClass(EcomOrderFormWithShippingAddress.countryToUpdateCartClass),c.addClass(EcomOrderFormWithShippingAddress.countryToUpdateCartClass)),b.hasClass(EcomOrderFormWithShippingAddress.regionToUpdateCartClass)&&
(b.removeClass(EcomOrderFormWithShippingAddress.regionToUpdateCartClass),c.addClass(EcomOrderFormWithShippingAddress.regionToUpdateCartClass)),b=b.val(),d=c.val(),EcomOrderFormWithShippingAddress.closed?c.val(""):!d&&b&&EcomOrderFormWithShippingAddress.copy_billing_to_shipping&&c.val(b).change()):(c.hasClass(EcomOrderFormWithShippingAddress.countryToUpdateCartClass)&&(c.removeClass(EcomOrderFormWithShippingAddress.countryToUpdateCartClass),b.addClass(EcomOrderFormWithShippingAddress.countryToUpdateCartClass)),
c.hasClass(EcomOrderFormWithShippingAddress.regionToUpdateCartClass)&&(c.removeClass(EcomOrderFormWithShippingAddress.regionToUpdateCartClass),b.addClass(EcomOrderFormWithShippingAddress.regionToUpdateCartClass)),c.hasClass("required")&&c.removeAttr("required").removeAttr("aria-required").removeAttr("data-has-required"));this.swapBillingHeader()},billingFieldSelector:function(a){a=a.replace("Shipping","");return" "+EcomOrderFormWithShippingAddress.formSelector+" input[name='"+a+"'], "+EcomOrderFormWithShippingAddress.formSelector+
" select[name='"+a+"'], "+EcomOrderFormWithShippingAddress.formSelector+" textarea[name='"+a+"']"},shippingFieldSelector:function(a){a="Shipping"+a.replace("Billing","");return" "+EcomOrderFormWithShippingAddress.formSelector+" input[name='"+a+"'], "+EcomOrderFormWithShippingAddress.formSelector+" select[name='"+a+"'], "+EcomOrderFormWithShippingAddress.formSelector+" textarea[name='"+a+"']"},removeEmailFromShippingCityHack:function(){var a=window.jQuery(EcomOrderFormWithShippingAddress.shippingCitySelector).val();
/^([a-zA-Z0-9_.-])+@([a-zA-Z0-9_.-])+\.([a-zA-Z])+([a-zA-Z])+/.test(a)&&window.jQuery(EcomOrderFormWithShippingAddress.shippingCitySelector).val(window.jQuery(EcomOrderFormWithShippingAddress.citySelector).val()).change()},getListOfSharedFields:function(){window.jQuery(this.formSelector+" input, "+this.formSelector+" select, "+this.formSelector+" textarea").each(function(a,b){var c=window.jQuery(b).attr("name");if("undefined"!==typeof c){var d=window.jQuery(b).attr("type");"undefined"!==typeof d&&"submit"!==d&&"hidden"!==d&&(d=EcomOrderFormWithShippingAddress.billingFieldSelector(c),
0<window.jQuery(d).length&&EcomOrderFormWithShippingAddress.fieldArray.push(c))}})},turnOnListeners:function(){window.jQuery(EcomOrderFormWithShippingAddress.billingFieldSelectors).change(function(){EcomOrderFormWithShippingAddress.updateFields()});window.jQuery(EcomOrderFormWithShippingAddress.shippingFieldSelectors).focus(function(){EcomOrderFormWithShippingAddress.updateFields()});window.jQuery(EcomOrderFormWithShippingAddress.useShippingDetailsSelector).change(function(){EcomOrderFormWithShippingAddress.hasShippingAddress()?
(window.jQuery(EcomOrderFormWithShippingAddress.shippingSectionSelector).slideDown(),window.jQuery(EcomOrderFormWithShippingAddress.shippingFieldSelector(EcomOrderFormWithShippingAddress.fieldArray[0])).focus(),window.jQuery(EcomOrderFormWithShippingAddress.shippingFieldSelectors).each(function(a,b){window.jQuery(b).hasClass("required")&&window.jQuery(b).attr("required","required").attr("aria-required",!0).attr("aria-required",!0).attr("data-has-required","yes")}),EcomOrderFormWithShippingAddress.closed=!1):(window.jQuery(EcomOrderFormWithShippingAddress.shippingSectionSelector).slideUp(),
window.jQuery(EcomOrderFormWithShippingAddress.shippingFieldSelectors).each(function(a,b){window.jQuery(b).hasClass("required")&&window.jQuery(b).removeAttr("required").removeAttr("aria-required").removeAttr("data-has-required")}),EcomOrderFormWithShippingAddress.closed=!0);EcomOrderFormWithShippingAddress.makeSureOnlyTheRightCountriesCanBeSelected();EcomOrderFormWithShippingAddress.updateFields()});0<window.jQuery(EcomOrderFormWithShippingAddress.useShippingDetailsAlternativeSelector).length&&window.jQuery(EcomOrderFormWithShippingAddress.useShippingDetailsAlternativeSelector).change(function(a){!0===
window.jQuery(EcomOrderFormWithShippingAddress.useShippingDetailsAlternativeSelector).is(":checked")?window.jQuery(EcomOrderFormWithShippingAddress.useShippingDetailsSelector).attr("checked","checked").val("1"):window.jQuery(EcomOrderFormWithShippingAddress.useShippingDetailsSelector).removeAttr("checked","checked").val("0");window.jQuery(EcomOrderFormWithShippingAddress.useShippingDetailsSelector).change()})},swapBillingHeader:function(){var a=window.jQuery(this.formSelector+"_BillingDetails"),b=this.hasShippingAddress()?this.billingHeaderAttributeTitleAlternative:
this.billingHeaderAttributeTitleAlternative+"_default",b=a.attr(b);a.text(b)},hasShippingAddress:function(){return window.jQuery(EcomOrderFormWithShippingAddress.useShippingDetailsSelector+'[type="hidden"]')?"1"==window.jQuery(EcomOrderFormWithShippingAddress.useShippingDetailsSelector).val():window.jQuery(EcomOrderFormWithShippingAddress.useShippingDetailsSelector).is(":checked")},makeSureOnlyTheRightCountriesCanBeSelected:function(){if("undefined"!==typeof CountryPrice_SetCountriesForDelivery_New&&"undefined"!==typeof CountryPrice_SetCountriesForDelivery_Original){var a=
this.hasShippingAddress()?CountryPrice_SetCountriesForDelivery_Original:CountryPrice_SetCountriesForDelivery_New,b=window.jQuery("select[name='Country']");EcomOrderFormWithShippingAddress.swappingOptions(b,a)}},swappingOptions:function(a,b){var c=window.jQuery(a).val();window.jQuery(a).empty();$.each(b,function(b,c){a.append($("<option></option>").attr("value",b).text(c))});window.jQuery(a).val(c)}}};
