<?xml version="1.0" encoding="UTF-8"?>
<class xmlns="http://xml.phpdox.net/src#" full="ProductGroupSearchPage" namespace="" name="ProductGroupSearchPage" abstract="false" final="false" start="12" end="89">
  <file path="./../../../code" file="ProductGroupSearchPage.php" realpath="/var/www/3.1.silverstripe-ecommerce.com/ecommerce/code/ProductGroupSearchPage.php" size="3354" time="2014-08-18T10:11:01+12:00" unixtime="1408313461" sha1="f1a6c0929b54d00034fb127dbc870ca295cdc6c8"/>
  <docblock>
    <description compact="This page manages searching for products"/>
    <authors value=": Nicolaas [at] Sunny Side Up .co.nz"/>
    <package value=": ecommerce"/>
    <sub value="-package: Pages"/>
  </docblock>
  <extends full="ProductGroup" namespace="" name="ProductGroup"/>
  <member name="icon" type="string" default="'ecommerce/images/icons/productgroupsearchpage'" visibility="private" line="19">
    <docblock>
      <description compact="standard SS variable"/>
      <static value="String | Array"/>
    </docblock>
  </member>
  <member name="description" type="string" default="&quot;This page allowing the user to search for products.&quot;" visibility="private" line="25">
    <docblock>
      <description compact="Standard SS variable."/>
      <var type="object">
        <type full="String" namespace="" name="String"/>
      </var>
    </docblock>
  </member>
  <member name="singular_name" type="string" default="&quot;Product Search Page&quot;" visibility="private" line="30">
    <docblock>
      <description compact="Standard SS variable."/>
    </docblock>
  </member>
  <method name="i18n_singular_name" start="31" end="31" abstract="false" final="false" static="false" visibility="public"/>
  <member name="plural_name" type="string" default="&quot;Product Search Pages&quot;" visibility="private" line="36">
    <docblock>
      <description compact="Standard SS variable."/>
    </docblock>
  </member>
  <method name="i18n_plural_name" start="37" end="37" abstract="false" final="false" static="false" visibility="public"/>
  <method name="canCreate" start="45" end="47" abstract="false" final="false" static="false" visibility="public">
    <docblock>
      <description compact="Standard SS function, we only allow for one Product Search Page to exist but we do allow for extensions to exist at the same time."/>
      <param type="object" variable="$member">
        <type full="Member" namespace="" name="Member"/>
      </param>
      <return type="object">
        <type full="Boolean" namespace="" name="Boolean"/>
      </return>
    </docblock>
    <parameter name="member" byreference="false" type="{unknown}" default="null"/>
  </method>
  <member name="allowCaching" type="{unknown}" default="false" visibility="protected" line="54">
    <docblock>
      <description compact="Can product list (and related) be cached at all?"/>
      <var type="object">
        <type full="Boolean" namespace="" name="Boolean"/>
      </var>
    </docblock>
  </member>
  <method name="getGroupFilter" start="56" end="63" abstract="false" final="false" static="false" visibility="public"/>
  <method name="currentSortSQL" start="69" end="80" abstract="false" final="false" static="false" visibility="protected">
    <docblock>
      <description compact="returns the SORT part of the final selection of products."/>
      <return description="| Array" type="object">
        <type full="String" namespace="" name="String"/>
      </return>
    </docblock>
  </method>
  <method name="childGroups" start="82" end="84" abstract="false" final="false" static="false" visibility="public">
    <parameter name="maxRecursiveLevel" byreference="false" type="{unknown}"/>
    <parameter name="filter" byreference="false" type="{unknown}" default="null"/>
    <parameter name="numberOfRecursions" byreference="false" type="integer" default="0"/>
  </method>
  <parent full="ProductGroup" namespace="" name="ProductGroup">
    <extends full="Page" namespace="" name="Page"/>
    <member name="sortFilterDisplayNames" type="array" visibility="protected" line="213">
      <docblock>
        <description compact="list of sort / filter / display variables"/>
        <var type="object">
          <type full="Array" namespace="" name="Array"/>
        </var>
      </docblock>
    </member>
    <member name="showProductLevels" type="array" visibility="protected" line="247">
      <docblock>
        <description/>
        <var type="object">List of options to show products.
With it, we provide a bunch of methods to access and edit the options.
NOTE: we can not have an option that has a zero key ( 0 =&gt; "none"), as this does not work
(as it is equal to not completed yet - not yet entered in the Database).<type full="Array" namespace="" name="Array"/></var>
      </docblock>
    </member>
    <member name="configOptionsCache" type="array" visibility="protected" line="261">
      <docblock>
        <description compact="variable to speed up methods in this class"/>
        <var type="object">
          <type full="Array" namespace="" name="Array"/>
        </var>
      </docblock>
    </member>
    <member name="myUserPreferencesDefaultCache" type="array" visibility="protected" line="267">
      <docblock>
        <description compact="cache variable for default preference key"/>
        <var type="object">
          <type full="Array" namespace="" name="Array"/>
        </var>
      </docblock>
    </member>
    <member name="rawCount" type="integer" default="0" visibility="protected" line="274">
      <docblock>
        <description compact="count before limit"/>
        <var type="object">
          <type full="Int" namespace="" name="Int"/>
        </var>
      </docblock>
    </member>
    <member name="totalCount" type="integer" default="0" visibility="protected" line="280">
      <docblock>
        <description compact="count after limit"/>
        <var type="object">
          <type full="Int" namespace="" name="Int"/>
        </var>
      </docblock>
    </member>
    <member name="allowCaching" type="{unknown}" default="true" visibility="protected" line="288">
      <docblock>
        <description compact="Can product list (and related) be cached at all? Set this to FALSE if the product details can be changed for an individual user."/>
        <var type="object">
          <type full="Boolean" namespace="" name="Boolean"/>
        </var>
      </docblock>
    </member>
    <member name="allProducts" type="{unknown}" default="null" visibility="protected" line="897">
      <docblock>
        <description compact="This is the dataList that contains all the products"/>
        <var description="$allProducts" type="object">
          <type full="DataList" namespace="" name="DataList"/>
        </var>
      </docblock>
    </member>
    <member name="canBePurchasedArray" type="{unknown}" default="null" visibility="protected" line="916">
      <docblock>
        <description compact="a list of relevant buyables that can be purchased.  We keep this so that that we can save to session, etc... for future use.">Should be set to NULL to start with so we know if it has been
set yet.</description>
        <var description="| Array (like so: array(1,2,4,5,99))" type="object">
          <type full="NULL" namespace="" name="NULL"/>
        </var>
      </docblock>
    </member>
    <method name="i18n_singular_name" start="155" end="155" abstract="false" final="false" static="false" visibility="public"/>
    <method name="i18n_plural_name" start="161" end="161" abstract="false" final="false" static="false" visibility="public"/>
    <method name="canCreate" start="169" end="172" abstract="false" final="false" static="false" visibility="public">
      <parameter name="member" byreference="false" type="{unknown}" default="null"/>
    </method>
    <method name="canEdit" start="179" end="182" abstract="false" final="false" static="false" visibility="public">
      <docblock>
        <description compact="Shop Admins can edit"/>
        <param type="object" variable="$member">
          <type full="Member" namespace="" name="Member"/>
        </param>
        <return type="object">
          <type full="Boolean" namespace="" name="Boolean"/>
        </return>
      </docblock>
      <parameter name="member" byreference="false" type="{unknown}" default="null"/>
    </method>
    <method name="canDelete" start="190" end="196" abstract="false" final="false" static="false" visibility="public">
      <docblock>
        <description compact="Standard SS method"/>
        <param type="object" variable="$member">
          <type full="Member" namespace="" name="Member"/>
        </param>
        <return type="object">
          <type full="Boolean" namespace="" name="Boolean"/>
        </return>
      </docblock>
      <parameter name="member" byreference="false" type="{unknown}" default="null"/>
    </method>
    <method name="canPublish" start="203" end="206" abstract="false" final="false" static="false" visibility="public">
      <docblock>
        <description compact="Standard SS method"/>
        <param type="object" variable="$member">
          <type full="Member" namespace="" name="Member"/>
        </param>
        <return type="object">
          <type full="Boolean" namespace="" name="Boolean"/>
        </return>
      </docblock>
      <parameter name="member" byreference="false" type="{unknown}" default="null"/>
    </method>
    <method name="getConfigOptions" start="296" end="302" abstract="false" final="false" static="false" visibility="protected">
      <docblock>
        <description compact="return the options for one type.">This method solely exists to speed up processing.</description>
        <param description="- options are FILTER | SORT | DISPLAY" type="object" variable="$type">
          <type full="String" namespace="" name="String"/>
        </param>
        <return type="object">
          <type full="Array" namespace="" name="Array"/>
        </return>
      </docblock>
      <parameter name="type" byreference="false" type="{unknown}"/>
    </method>
    <method name="getSortFilterDisplayNames" start="314" end="333" abstract="false" final="false" static="false" visibility="protected">
      <docblock>
        <description compact="returns the full sortFilterDisplayNames set, a subset, or one value by either type (e.g. FILER) or variable (e.g dbFieldName) or both."/>
        <param description="FILTER | SORT | DISPLAY or sessionName, getVariable, etc..." type="object" variable="$typeOfVariableName">
          <type full="String" namespace="" name="String"/>
        </param>
        <param description="sessionName, getVariable, etc..." type="object" variable="$variable:">
          <type full="String" namespace="" name="String"/>
        </param>
        <return description="| String" type="object">
          <type full="Array" namespace="" name="Array"/>
        </return>
      </docblock>
      <parameter name="typeOrVariable" byreference="false" type="string" default="&quot;&quot;"/>
      <parameter name="variable" byreference="false" type="string" default="&quot;&quot;"/>
      <inline>
        <comment value="return a string ..." line="315"/>
        <comment value="return an array ..." line="319"/>
      </inline>
    </method>
    <method name="setCurrentUserPreference" start="343" end="345" abstract="false" final="false" static="false" visibility="protected">
      <docblock>
        <description compact="sets a user preference.  This is typically used by the controller to set filter and sort."/>
        <param description="SORT | FILTER | DISPLAY" type="object" variable="$type">
          <type full="String" namespace="" name="String"/>
        </param>
        <param type="object" variable="$value">
          <type full="String" namespace="" name="String"/>
        </param>
      </docblock>
      <parameter name="type" byreference="false" type="{unknown}"/>
      <parameter name="value" byreference="false" type="{unknown}"/>
    </method>
    <method name="getCurrentUserPreferences" start="356" end="358" abstract="false" final="false" static="false" visibility="protected">
      <docblock>
        <description compact="Get a user preference.">This value can be updated by the controller
For example, the filter can be changed, based on a session value.</description>
        <param description="SORT | FILTER | DISPLAY" type="object" variable="$type">
          <type full="String" namespace="" name="String"/>
        </param>
        <return type="object">
          <type full="String" namespace="" name="String"/>
        </return>
      </docblock>
      <parameter name="type" byreference="false" type="{unknown}"/>
    </method>
    <method name="getMyUserPreferencesDefault" start="374" end="398" abstract="false" final="false" static="false" visibility="protected">
      <docblock>
        <description compact="Checks for the most applicable user preferences for this page: 1. what is saved in Database for this page.">2. what the parent product group has saved in the database
3. what the standard default is</description>
        <param description="- FILTER | SORT | DISPLAY" type="object" variable="$type">
          <type full="String" namespace="" name="String"/>
        </param>
        <return description="- returns the key" type="object">
          <type full="String" namespace="" name="String"/>
        </return>
      </docblock>
      <parameter name="type" byreference="false" type="{unknown}"/>
    </method>
    <method name="getUserPreferencesOptionsForDropdown" start="423" end="438" abstract="false" final="false" static="false" visibility="protected">
      <docblock>
        <description compact="SORT: returns an array of Key =&gt; Title for sort options">FILTER:
Returns options for the dropdown of filter options.

DISPLAY:
Returns the options for product display styles.
In the configuration you can set which ones are available.
If one is available then you must make sure that the corresponding template is available.
For example, if the display style is
MyTemplate =&gt; "All Details"
Then you must make sure MyTemplate.ss exists.</description>
        <param description="- FILTER | SORT | DISPLAY" type="object" variable="$type">
          <type full="String" namespace="" name="String"/>
        </param>
        <return type="object">
          <type full="Array" namespace="" name="Array"/>
        </return>
      </docblock>
      <parameter name="type" byreference="false" type="{unknown}"/>
    </method>
    <method name="getUserSettingsOptionSQL" start="460" end="477" abstract="false" final="false" static="false" visibility="protected">
      <docblock>
        <description compact="SORT: Returns the sort sql for a particular sorting key.">If no key is provided then the default key will be returned.</description>
        <param type="object" variable="$key">
          <type full="String" namespace="" name="String"/>
        </param>
        <param description="- FILTER | SORT | DISPLAY" type="object" variable="$type">
          <type full="String" namespace="" name="String"/>
        </param>
        <param description="- the options selected" type="object" variable="$key">
          <type full="String" namespace="" name="String"/>
        </param>
        <return description="(e.g. Array(MyField =&gt; &quot;ASC&quot;, &quot;MyOtherField&quot; =&gt; &quot;DESC&quot;)" type="object">FILTER:
Returns the sql associated with a filter option.<type full="Array" namespace="" name="Array"/></return>
        <return description="| String (e.g. array(&quot;MyField&quot; =&gt; 1, &quot;MyOtherField&quot; =&gt; 0)) OR STRING" type="object">
          <type full="Array" namespace="" name="Array"/>
        </return>
      </docblock>
      <parameter name="type" byreference="false" type="{unknown}"/>
      <parameter name="key" byreference="false" type="string" default="&quot;&quot;"/>
      <inline>
        <comment value="if we cant find the current one, use the default" line="462"/>
      </inline>
    </method>
    <method name="getUserPreferencesTitle" start="494" end="505" abstract="false" final="false" static="false" visibility="public">
      <docblock>
        <description compact="Returns the Title for a type key.">If no key is provided then the default key is used.</description>
        <param description="- FILTER | SORT | DISPLAY" type="object" variable="$type">
          <type full="String" namespace="" name="String"/>
        </param>
        <param type="object" variable="$key">
          <type full="String" namespace="" name="String"/>
        </param>
        <return type="object">
          <type full="String" namespace="" name="String"/>
        </return>
      </docblock>
      <parameter name="type" byreference="false" type="{unknown}"/>
      <parameter name="key" byreference="false" type="string" default="&quot;&quot;"/>
    </method>
    <method name="ProductsPerPage" start="515" end="515" abstract="false" final="false" static="false" visibility="public">
      <docblock>
        <description compact="return Integer"/>
      </docblock>
    </method>
    <method name="MyNumberOfProductsPerPage" start="516" end="530" abstract="false" final="false" static="false" visibility="public"/>
    <method name="MyLevelOfProductsToShow" start="544" end="556" abstract="false" final="false" static="false" visibility="public">
      <docblock>
        <description compact="returns the number of product groups (children) to show in the current product list based on the user setting for this page."/>
        <return type="object">
          <type full="Int" namespace="" name="Int"/>
        </return>
      </docblock>
      <inline>
        <comment value="reset to default" line="550"/>
      </inline>
    </method>
    <method name="getCMSFields" start="569" end="640" abstract="false" final="false" static="false" visibility="public">
      <docblock>
        <description compact="standard SS method"/>
        <return type="object">
          <type full="FieldList" namespace="" name="FieldList"/>
        </return>
      </docblock>
      <inline>
        <comment value="dirty hack to show images!" line="571"/>
        <comment value="number of products" line="573"/>
        <comment value="sort" line="589"/>
        <comment value="filter" line="602"/>
        <comment value="display style" line="615"/>
      </inline>
    </method>
    <method name="getProductGroupsTable" start="646" end="656" abstract="false" final="false" static="false" visibility="protected">
      <docblock>
        <description compact="Used in getCSMFields"/>
        <return type="object">
          <type full="GridField" namespace="" name="GridField"/>
        </return>
      </docblock>
      <inline>
        <comment value="make sure edits are done in the right place ..." line="654"/>
      </inline>
    </method>
    <method name="currentInitialProducts" start="687" end="712" abstract="false" final="false" static="false" visibility="public">
      <docblock>
        <description compact="returns the inital (all) products, based on the all the eligible products for the page.">This is THE pivotal method that probably changes for classes that
extend ProductGroup as here you can determine what products or other buyables are shown.

The return from this method will then be sorted to produce the final product list.

There is no sort for the initial retrieval

This method is public so that you can retrieve a list of products for a product group page.</description>
        <param description="| string $extraFilter Additional SQL filters to apply to the Product retrieval" type="array"/>
        <param description="Alternative standard filter to be used." type="string" variable="$alternativeFilterKey"/>
        <return type="object">
          <type full="DataList" namespace="" name="DataList"/>
        </return>
      </docblock>
      <parameter name="extraFilter" byreference="false" type="{unknown}" default="null"/>
      <parameter name="alternativeFilterKey" byreference="false" type="string" default="''"/>
      <inline>
        <comment value="INIT ALLPRODUCTS" line="689"/>
        <comment value="GROUP FILTER (PRODUCTS FOR THIS GROUP)" line="694"/>
        <comment value="STANDARD FILTER (INCLUDES USER PREFERENCE)" line="697"/>
        <comment value="EXTRA FILTER (ON THE FLY FROM CONTROLLER)" line="700"/>
        <comment value="JOINS" line="708"/>
      </inline>
    </method>
    <method name="currentInitialProductsAsCachedArray" start="724" end="734" abstract="false" final="false" static="false" visibility="public">
      <docblock>
        <description compact="this method can be used quickly current initial products whenever you write:  ```php   currentInitialProducts-&gt;(null, $key)-&gt;map(&quot;ID&quot;, &quot;ID&quot;)-&gt;toArray();  ``` this is the better replacement."/>
        <param type="object" variable="$filterKey">
          <type full="String" namespace="" name="String"/>
        </param>
        <return type="object">
          <type full="Array" namespace="" name="Array"/>
        </return>
      </docblock>
      <parameter name="filterKey" byreference="false" type="{unknown}"/>
    </method>
    <method name="getProductsAlsoInOtherGroups" start="748" end="750" abstract="false" final="false" static="false" visibility="protected">
      <docblock>
        <description compact="Do products occur in more than one group"/>
        <return type="object">
          <type full="Boolean" namespace="" name="Boolean"/>
        </return>
      </docblock>
    </method>
    <method name="getBuyableClassName" start="756" end="758" abstract="false" final="false" static="false" visibility="protected">
      <docblock>
        <description compact="Returns the class we are working with"/>
        <return type="object">
          <type full="String" namespace="" name="String"/>
        </return>
      </docblock>
    </method>
    <method name="getGroupFilter" start="766" end="802" abstract="false" final="false" static="false" visibility="protected">
      <docblock>
        <description/>
        <see value=": important notes at the top of this file / class">IMPORTANT: Adjusts allProducts and returns it...</see>
        <return type="object">
          <type full="DataList" namespace="" name="DataList"/>
        </return>
      </docblock>
    </method>
    <method name="getProductsToBeIncludedFromOtherGroups" start="811" end="823" abstract="false" final="false" static="false" visibility="protected">
      <docblock>
        <description compact="If products are show in more than one group Then this returns a where phrase for any products that are linked to this product group"/>
        <return type="object">
          <type full="String" namespace="" name="String"/>
        </return>
      </docblock>
      <inline>
        <comment value="TO DO: this should actually return" line="812"/>
        <comment value="Product.ID = IN ARRAY(bla bla)" line="813"/>
      </inline>
    </method>
    <method name="getStandardFilter" start="832" end="847" abstract="false" final="false" static="false" visibility="protected">
      <docblock>
        <description/>
        <see value=": important notes at the top of this class / file for more information!">IMPORTANT: Adjusts allProducts and returns it...</see>
        <param description="- filter key to be used... if none is specified then we use the current one." type="string" variable="$alternativeFilterKey"/>
        <return type="object">
          <type full="DataList" namespace="" name="DataList"/>
        </return>
      </docblock>
      <parameter name="alternativeFilterKey" byreference="false" type="string" default="''"/>
    </method>
    <method name="getGroupJoin" start="856" end="858" abstract="false" final="false" static="false" visibility="protected">
      <docblock>
        <description compact="Join statement for the product groups.">IMPORTANT: Adjusts allProducts and returns it...</description>
        <return type="object">
          <type full="DataList" namespace="" name="DataList"/>
        </return>
      </docblock>
    </method>
    <method name="allowPurchaseWhereStatement" start="868" end="878" abstract="false" final="false" static="false" visibility="protected">
      <docblock>
        <description compact="Quick - dirty hack - filter to only show relevant products"/>
        <param type="object" variable="$asArray">
          <type full="Boolean" namespace="" name="Boolean"/>
        </param>
        <param type="object" variable="$table">
          <type full="String" namespace="" name="String"/>
        </param>
        <return description="| STRING | ARRAY" type="object">
          <type full="NULL" namespace="" name="NULL"/>
        </return>
      </docblock>
      <parameter name="asArray" byreference="false" type="{unknown}" default="true"/>
      <parameter name="table" byreference="false" type="string" default="&quot;Product&quot;"/>
    </method>
    <method name="RawCount" start="922" end="924" abstract="false" final="false" static="false" visibility="public">
      <docblock>
        <description compact="returns the total numer of products (before pagination)"/>
        <return type="object">
          <type full="Integer" namespace="" name="Integer"/>
        </return>
      </docblock>
    </method>
    <method name="TotalCount" start="930" end="932" abstract="false" final="false" static="false" visibility="public">
      <docblock>
        <description compact="returns the total numer of products (before pagination)"/>
        <return type="object">
          <type full="Integer" namespace="" name="Integer"/>
        </return>
      </docblock>
    </method>
    <method name="getProductsThatCanBePurchasedArray" start="939" end="941" abstract="false" final="false" static="false" visibility="public">
      <docblock>
        <description compact="this is used to save a list of sorted products so that you can find a previous and a next button, etc..."/>
        <return type="object">
          <type full="Array" namespace="" name="Array"/>
        </return>
      </docblock>
    </method>
    <method name="ProductsShowable" start="962" end="971" abstract="false" final="false" static="false" visibility="public">
      <docblock>
        <description compact="Retrieve a set of products, based on the given parameters.">This method is usually called by the various controller methods.
The extraFilter helps you to select different products,
depending on the method used in the controller.

Furthermore, extrafilter can take all sorts of variables.
This is basically setup like this so that in ProductGroup extensions you
can setup all sorts of filters, while still using the ProductsShowable method.

The extra filter can be supplied as array (e.g. array("ID" =&gt; 12) or array("ID" =&gt; array(12,13,45)))
or as string. Arrays are used like this $productDataList-&gt;filter($array) and
strings are used with the where commands $productDataList-&gt;where($string).</description>
        <param description="| string $extraFilter Additional SQL filters to apply to the Product retrieval" type="array"/>
        <param description="| string $alternativeSort Additional SQL for sorting" type="array"/>
        <param description="alternative filter key to be used" type="string" variable="$alternativeFilterKey"/>
        <return description="| Null" type="object">
          <type full="DataList" namespace="" name="DataList"/>
        </return>
      </docblock>
      <parameter name="extraFilter" byreference="false" type="{unknown}" default="null"/>
      <parameter name="alternativeSort" byreference="false" type="{unknown}" default="null"/>
      <parameter name="alternativeFilterKey" byreference="false" type="string" default="''"/>
      <inline>
        <comment value="get original products without sort" line="964"/>
        <comment value="sort products" line="967"/>
      </inline>
    </method>
    <method name="currentFinalProducts" start="987" end="996" abstract="false" final="false" static="false" visibility="protected">
      <docblock>
        <description compact="returns the final products, based on the all the eligile products for the page.">In the process we also save a list of included products
and we sort them.  We also keep a record of the total count.

All of the 'current' methods are to support the currentFinalProducts Method.</description>
        <todo value=": cache data for faster access."/>
        <param description="| string $alternativeSort = Alternative Sort String or array" type="array"/>
        <return type="object">
          <type full="DataList" namespace="" name="DataList"/>
        </return>
      </docblock>
      <parameter name="alternativeSort" byreference="false" type="{unknown}" default="null"/>
      <inline>
        <comment value="limit to maximum number of products for speed's sake" line="990"/>
      </inline>
    </method>
    <method name="sortCurrentFinalProducts" start="1002" end="1017" abstract="false" final="false" static="false" visibility="protected">
      <docblock>
        <description compact="returns the SORT part of the final selection of products."/>
        <return description="(allProducts)" type="object">
          <type full="DataList" namespace="" name="DataList"/>
        </return>
      </docblock>
      <parameter name="alternativeSort" byreference="false" type="{unknown}"/>
    </method>
    <method name="IsIDarray" start="1026" end="1028" abstract="false" final="false" static="false" visibility="protected">
      <docblock>
        <description compact="is the variable provided is an array that can be used as a list of IDs?"/>
        <param type="mixed"/>
        <return type="object">
          <type full="Boolean" namespace="" name="Boolean"/>
        </return>
      </docblock>
      <parameter name="variable" byreference="false" type="{unknown}"/>
    </method>
    <method name="currentSortSQL" start="1034" end="1037" abstract="false" final="false" static="false" visibility="protected">
      <docblock>
        <description compact="returns the SORT part of the final selection of products."/>
        <return description="| Array" type="object">
          <type full="String" namespace="" name="String"/>
        </return>
      </docblock>
    </method>
    <method name="createSortStatementFromIDArray" start="1045" end="1056" abstract="false" final="false" static="false" visibility="protected">
      <docblock>
        <description compact="creates a sort string from a list of ID arrays..."/>
        <param description="- list of product IDs" type="object" variable="$IDarray">
          <type full="Array" namespace="" name="Array"/>
        </param>
        <return type="object">
          <type full="String" namespace="" name="String"/>
        </return>
      </docblock>
      <parameter name="IDarray" byreference="false" type="{unknown}"/>
      <parameter name="table" byreference="false" type="string" default="&quot;Product&quot;"/>
    </method>
    <method name="limitCurrentFinalProducts" start="1062" end="1073" abstract="false" final="false" static="false" visibility="protected">
      <docblock>
        <description compact="limits the products to a maximum number (for speed's sake)"/>
        <return description="(this-&gt;allProducts adjusted!)" type="object">
          <type full="DataList" namespace="" name="DataList"/>
        </return>
      </docblock>
    </method>
    <method name="removeExcludedProductsAndSaveIncludedProducts" start="1083" end="1113" abstract="false" final="false" static="false" visibility="protected">
      <docblock>
        <description compact="Excluded products that can not be purchased We all make a record of all the products that are in the current list For efficiency sake, we do both these things at the same time.">IMPORTANT: Adjusts allProducts and returns it...</description>
        <todo value=": cache data per user ...."/>
        <return type="object">
          <type full="DataList" namespace="" name="DataList"/>
        </return>
      </docblock>
    </method>
    <method name="ChildGroups" start="1130" end="1158" abstract="false" final="false" static="false" visibility="public">
      <docblock>
        <description compact="Returns children ProductGroup pages of this group."/>
        <param description="- maximum depth , e.g. 1 = one level down - so no Child Groups are returned..." type="object" variable="$maxRecursiveLevel">
          <type full="Int" namespace="" name="Int"/>
        </param>
        <param description="| Array $filter - additional filter to be added" type="object">
          <type full="String" namespace="" name="String"/>
        </param>
        <param description="- current level of depth" type="object" variable="$numberOfRecursions">
          <type full="Int" namespace="" name="Int"/>
        </param>
        <return description="(ProductGroups)" type="object">
          <type full="ArrayList" namespace="" name="ArrayList"/>
        </return>
      </docblock>
      <parameter name="maxRecursiveLevel" byreference="false" type="{unknown}"/>
      <parameter name="filter" byreference="false" type="{unknown}" default="null"/>
      <parameter name="numberOfRecursions" byreference="false" type="integer" default="0"/>
    </method>
    <method name="ChildGroupsBackup" start="1163" end="1194" abstract="false" final="false" static="false" visibility="public">
      <docblock>
        <description compact="Deprecated method"/>
      </docblock>
      <parameter name="maxRecursiveLevel" byreference="false" type="{unknown}"/>
      <parameter name="filter" byreference="false" type="string" default="&quot;&quot;"/>
    </method>
    <method name="ParentGroup" start="1200" end="1204" abstract="false" final="false" static="false" visibility="public">
      <docblock>
        <description compact="returns the parent page, but only if it is an instance of Product Group."/>
        <return description="| Null (ProductGroup)" type="object">
          <type full="DataObject" namespace="" name="DataObject"/>
        </return>
      </docblock>
    </method>
    <method name="GroupsMenu" start="1216" end="1223" abstract="false" final="false" static="false" visibility="public">
      <docblock>
        <description compact="Recursively generate a product menu."/>
        <param type="object" variable="$filter">
          <type full="String" namespace="" name="String"/>
        </param>
        <return description="(ProductGroups)" type="object">
          <type full="ArrayList" namespace="" name="ArrayList"/>
        </return>
      </docblock>
      <parameter name="filter" byreference="false" type="string" default="&quot;ShowInMenus = 1&quot;"/>
    </method>
    <method name="BestAvailableImage" start="1237" end="1245" abstract="false" final="false" static="false" visibility="public">
      <docblock>
        <description compact="returns a &quot;BestAvailable&quot; image if the current one is not available In some cases this is appropriate and in some cases this is not.">For example, consider the following setup
- product A with three variations
- Product A has an image, but the variations have no images
With this scenario, you want to show ONLY the product image
on the product page, but if one of the variations is added to the
cart, then you want to show the product image.
This can be achieved bu using the BestAvailable image.</description>
        <return description="| Null" type="object">
          <type full="Image" namespace="" name="Image"/>
        </return>
      </docblock>
    </method>
    <method name="ProductGroupsFromAlsoShowProducts" start="1267" end="1289" abstract="false" final="false" static="false" visibility="public">
      <docblock>
        <description compact="returns a list of Product Groups that have the products for the CURRENT product group listed as part of their AlsoShowProducts list.">EXAMPLE:
You can use the AlsoShowProducts to list products by Brand.
In general, they are listed under type product groups (e.g. socks, sweaters, t-shirts),
and you create a list of separate ProductGroups (brands) that do not have ANY products as children,
but link to products using the AlsoShowProducts many_many relation.

With the method below you can work out a list of brands that apply to the
current product group (e.g. socks come in three brands - namely A, B and C)</description>
        <return type="object">
          <type full="DataList" namespace="" name="DataList"/>
        </return>
      </docblock>
      <inline>
        <comment value="we need to add the last array to make sure we have some products..." line="1269"/>
        <comment value="just in case" line="1283"/>
      </inline>
    </method>
    <method name="ProductGroupsFromAlsoShowProductsInverse" start="1298" end="1310" abstract="false" final="false" static="false" visibility="public">
      <docblock>
        <description compact="This is the inverse of ProductGroupsFromAlsoShowProducts That is, it list the product groups that a product is primarily listed under (exact parents only) from a &quot;AlsoShow&quot; product List."/>
        <return type="object">
          <type full="DataList" namespace="" name="DataList"/>
        </return>
      </docblock>
      <inline>
        <comment value="just in case" line="1304"/>
      </inline>
    </method>
    <method name="ProductGroupsParentGroups" start="1317" end="1326" abstract="false" final="false" static="false" visibility="public">
      <docblock>
        <description compact="given the products for this page, retrieve the parent groups excluding the current one."/>
        <return type="object">
          <type full="DataList" namespace="" name="DataList"/>
        </return>
      </docblock>
      <inline>
        <comment value="just in case" line="1320"/>
      </inline>
    </method>
    <method name="getStage" start="1332" end="1338" abstract="false" final="false" static="false" visibility="protected">
      <docblock>
        <description compact="returns stage as &quot;&quot; or &quot;_Live&quot;"/>
        <return type="object">
          <type full="String" namespace="" name="String"/>
        </return>
      </docblock>
    </method>
    <method name="IsEcommercePage" start="1348" end="1350" abstract="false" final="false" static="false" visibility="public">
      <docblock>
        <description compact="tells us if the current page is part of e-commerce."/>
        <return type="object">
          <type full="Boolean" namespace="" name="Boolean"/>
        </return>
      </docblock>
    </method>
    <method name="onAfterWrite" start="1353" end="1361" abstract="false" final="false" static="false" visibility="public"/>
    <method name="AllowCaching" start="1367" end="1369" abstract="false" final="false" static="false" visibility="public"/>
    <method name="retrieveObjectStore" start="1376" end="1386" abstract="false" final="false" static="false" visibility="protected">
      <docblock>
        <description compact="saving an object to the"/>
        <param type="object" variable="$otherGroups">
          <type full="Boolean" namespace="" name="Boolean"/>
        </param>
        <return type="object">
          <type full="Mixed" namespace="" name="Mixed"/>
        </return>
      </docblock>
      <parameter name="cacheKey" byreference="false" type="{unknown}"/>
    </method>
    <method name="saveObjectStore" start="1394" end="1402" abstract="false" final="false" static="false" visibility="protected">
      <docblock>
        <description compact="returns true when the data is saved..."/>
        <param type="object" variable="$data">
          <type full="Mixed" namespace="" name="Mixed"/>
        </param>
        <param description="- key under which the data is saved..." type="object" variable="$cacheKey">
          <type full="String" namespace="" name="String"/>
        </param>
        <return type="object">
          <type full="Boolean" namespace="" name="Boolean"/>
        </return>
      </docblock>
      <parameter name="data" byreference="false" type="{unknown}"/>
      <parameter name="cacheKey" byreference="false" type="{unknown}"/>
    </method>
    <method name="SearchResultsSessionVariable" start="1404" end="1412" abstract="false" final="false" static="false" visibility="public">
      <parameter name="isForGroups" byreference="false" type="{unknown}" default="false"/>
    </method>
  </parent>
</class>
