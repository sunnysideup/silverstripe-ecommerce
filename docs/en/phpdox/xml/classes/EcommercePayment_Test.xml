<?xml version="1.0" encoding="UTF-8"?>
<class xmlns="http://xml.phpdox.net/src#" full="EcommercePayment_Test" namespace="" name="EcommercePayment_Test" abstract="false" final="false" start="479" end="484">
  <file path="./../../../code/model/money" file="EcommercePayment.php" realpath="/var/www/3.1.silverstripe-ecommerce.com/ecommerce/code/model/money/EcommercePayment.php" size="15211" time="2014-04-25T09:02:16+12:00" unixtime="1398373336" sha1="b5379c4bd3b234e00a2b66a558c8b8844eddf6bf"/>
  <docblock>
    <description compact="Payment object representing a generic test payment"/>
    <package value="ecommerce"/>
    <subpackage value="payment"/>
  </docblock>
  <extends full="EcommercePayment" namespace="" name="EcommercePayment"/>
  <method name="getPaymentFormRequirements" start="481" end="483" abstract="false" final="false" static="false" visibility="public"/>
  <parent full="EcommercePayment" namespace="" name="EcommercePayment">
    <extends full="DataObject" namespace="" name="DataObject"/>
    <method name="process_payment_form_and_return_next_step" start="87" end="132" abstract="false" final="false" static="true" visibility="public">
      <docblock>
        <description compact="Process payment form and return next step in the payment process.">Steps taken are:
1. create new payment
2. save form into payment
3. return payment result</description>
        <param description="- the order that is being paid" type="object" variable="$order">
          <type full="Order" namespace="" name="Order"/>
        </param>
        <param description="- the form that is being submitted" type="object" variable="$form">
          <type full="Form" namespace="" name="Form"/>
        </param>
        <param description="- Array of data that is submittted" type="object" variable="$data">
          <type full="Array" namespace="" name="Array"/>
        </param>
        <return description="- if successful, this method will return TRUE" type="object">
          <type full="Boolean" namespace="" name="Boolean"/>
        </return>
      </docblock>
      <parameter name="order" byreference="false" type="object">
        <type full="\\Order" namespace="\" name="Order"/>
      </parameter>
      <parameter name="form" byreference="false" type="object">
        <type full="\\Form" namespace="\" name="Form"/>
      </parameter>
      <parameter name="data" byreference="false" type="array"/>
      <inline>
        <comment value="Save payment data from form and process payment" line="102"/>
        <comment value="important to set the amount and currency." line="105"/>
        <comment value="Process payment, get the result back" line="108"/>
      </inline>
    </method>
    <method name="getCMSFields" start="138" end="142" abstract="false" final="false" static="false" visibility="public">
      <docblock>
        <description compact="standard SS method"/>
        <return type="object">
          <type full="FieldList" namespace="" name="FieldList"/>
        </return>
      </docblock>
    </method>
    <method name="canCreate" start="149" end="154" abstract="false" final="false" static="false" visibility="public">
      <docblock>
        <description compact="Standard SS method"/>
        <param type="object" variable="$member">
          <type full="Member" namespace="" name="Member"/>
        </param>
        <return type="object">
          <type full="Boolean" namespace="" name="Boolean"/>
        </return>
      </docblock>
      <parameter name="member" byreference="false" type="{unknown}" default="null"/>
    </method>
    <method name="canDelete" start="161" end="163" abstract="false" final="false" static="false" visibility="public">
      <docblock>
        <description compact="Standard SS method"/>
        <param type="object" variable="$member">
          <type full="Member" namespace="" name="Member"/>
        </param>
        <return type="object">
          <type full="Boolean" namespace="" name="Boolean"/>
        </return>
      </docblock>
      <parameter name="member" byreference="false" type="{unknown}" default="null"/>
    </method>
    <method name="canEdit" start="170" end="175" abstract="false" final="false" static="false" visibility="public">
      <docblock>
        <description compact="Standard SS method"/>
        <param type="object" variable="$member">
          <type full="Member" namespace="" name="Member"/>
        </param>
        <return type="object">
          <type full="Boolean" namespace="" name="Boolean"/>
        </return>
      </docblock>
      <parameter name="member" byreference="false" type="{unknown}" default="null"/>
    </method>
    <method name="redirectToOrder" start="180" end="189" abstract="false" final="false" static="false" visibility="public">
      <docblock>
        <description compact="redirect to order action"/>
      </docblock>
    </method>
    <method name="AmountValue" start="194" end="194" abstract="false" final="false" static="false" visibility="public">
      <docblock>
        <description/>
        <return type="float"/>
      </docblock>
    </method>
    <method name="getAmountValue" start="195" end="197" abstract="false" final="false" static="false" visibility="public"/>
    <method name="AmountCurrency" start="202" end="202" abstract="false" final="false" static="false" visibility="public">
      <docblock>
        <description/>
        <return type="object">
          <type full="String" namespace="" name="String"/>
        </return>
      </docblock>
    </method>
    <method name="getAmountCurrency" start="203" end="205" abstract="false" final="false" static="false" visibility="public"/>
    <method name="onAfterWrite" start="212" end="218" abstract="false" final="false" static="false" visibility="public">
      <docblock>
        <description compact="standard SS method try to finalise order if payment has been made."/>
      </docblock>
    </method>
    <method name="Status" start="224" end="226" abstract="false" final="false" static="false" visibility="public">
      <docblock>
        <description compact="return String"/>
      </docblock>
    </method>
    <method name="site_currency" start="232" end="234" abstract="false" final="false" static="true" visibility="public">
      <docblock>
        <description compact="Return the site currency in use."/>
        <return type="string"/>
      </docblock>
    </method>
    <method name="populateDefaults" start="241" end="245" abstract="false" final="false" static="false" visibility="public">
      <docblock>
        <description compact="Set currency to default one.">Set IP address</description>
      </docblock>
    </method>
    <method name="setClientIP" start="251" end="267" abstract="false" final="false" static="false" visibility="protected">
      <docblock>
        <description compact="Set the IP address of the user to this payment record.">This isn't perfect - IP addresses can be hidden fairly easily.</description>
      </docblock>
      <inline>
        <comment value="Only set the IP and ProxyIP if none currently set" line="264"/>
      </inline>
    </method>
    <method name="PaymentMethod" start="273" end="278" abstract="false" final="false" static="false" visibility="public">
      <docblock>
        <description compact="Returns the Payment type currently in use."/>
        <return type="string"/>
      </docblock>
    </method>
    <method name="combined_form_fields" start="288" end="314" abstract="false" final="false" static="true" visibility="public">
      <docblock>
        <description compact="Return a set of payment fields from all enabled payment methods for this site, given the .">is used to define which methods are available.</description>
        <param description="formatted amount (e.g. 12.30) without the currency" type="object" variable="$amount">
          <type full="String" namespace="" name="String"/>
        </param>
        <return type="object">
          <type full="FieldList" namespace="" name="FieldList"/>
        </return>
      </docblock>
      <parameter name="amount" byreference="false" type="{unknown}"/>
      <inline>
        <comment value="Create the initial form fields, which defines an OptionsetField" line="290"/>
        <comment value="allowing the user to choose which payment method to use." line="291"/>
        <comment value="Create a new CompositeField with method specific fields," line="301"/>
        <comment value="as defined on each payment method class using getPaymentFormFields()" line="302"/>
        <comment value="Add those fields to the initial FieldSet we first created" line="307"/>
        <comment value="Add the amount and subtotal fields for the payment amount" line="311"/>
      </inline>
    </method>
    <method name="get_supported_methods" start="322" end="348" abstract="false" final="false" static="true" visibility="public">
      <docblock>
        <description compact="returns the list of supported methods test methods are included if the site is in DEV mode OR the current user is a ShopAdmin."/>
        <return type="object">
          <type full="Array" namespace="" name="Array"/>
        </return>
      </docblock>
    </method>
    <method name="combined_form_requirements" start="355" end="374" abstract="false" final="false" static="true" visibility="public">
      <docblock>
        <description compact="Return the form requirements for all the payment methods."/>
        <return description="array suitable for passing to CustomRequiredFields" type="object">
          <type full="An" namespace="" name="An"/>
        </return>
      </docblock>
      <inline>
        <comment value="Loop on available methods" line="357"/>
        <comment value="Put limiters into the JS/PHP code to only use those requirements for this payment method" line="363"/>
      </inline>
    </method>
    <method name="getPaymentFormFields" start="385" end="385" abstract="false" final="false" static="false" visibility="public">
      <docblock>
        <description compact="Return the payment form fields that should be shown on the checkout order form for the payment type. Example: for {@link DPSPayment}, this would be a set of fields to enter your credit card details."/>
        <return type="object">
          <type full="FieldList" namespace="" name="FieldList"/>
        </return>
      </docblock>
    </method>
    <method name="getPaymentFormRequirements" start="396" end="396" abstract="false" final="false" static="false" visibility="public">
      <docblock>
        <description compact="Define what fields defined in {@link Order-&gt;getPaymentFormFields()} should be required."/>
        <see value="DPSPayment-&gt;getPaymentFormRequirements() for an example on how">this is implemented.</see>
        <return type="array"/>
      </docblock>
    </method>
    <method name="processPayment" start="411" end="411" abstract="false" final="false" static="false" visibility="public">
      <docblock>
        <description compact="Perform payment processing for the type of payment. For example, if this was a credit card payment type, you would perform the data send off to the payment gateway on this function for your payment subclass.">This is used by <link xmlns="http://xml.phpdox.net/src#" value="OrderForm"/> when it is
submitted.
</description>
        <param description="The form request data - see OrderForm" type="array" variable="$data"/>
        <param description="The form object submitted on" type="object" variable="$form">
          <type full="OrderForm" namespace="" name="OrderForm"/>
        </param>
      </docblock>
      <parameter name="data" byreference="false" type="{unknown}"/>
      <parameter name="form" byreference="false" type="{unknown}"/>
    </method>
    <method name="getForm" start="413" end="413" abstract="false" final="false" static="false" visibility="public">
      <parameter name="whichTest" byreference="false" type="{unknown}"/>
    </method>
    <method name="handleError" start="415" end="418" abstract="false" final="false" static="false" visibility="protected">
      <parameter name="e" byreference="false" type="{unknown}"/>
    </method>
    <method name="PaidObject" start="420" end="422" abstract="false" final="false" static="false" visibility="public"/>
    <method name="validCreditCard" start="432" end="438" abstract="false" final="false" static="false" visibility="public">
      <docblock>
        <description compact="checks if a credit card is a real credit card number"/>
        <reference value=": http://en.wikipedia.org/wiki/Luhn_algorithm"/>
        <param description="| Int $number" type="object">
          <type full="String" namespace="" name="String"/>
        </param>
        <return type="object">
          <type full="Boolean" namespace="" name="Boolean"/>
        </return>
      </docblock>
      <parameter name="number" byreference="false" type="{unknown}"/>
    </method>
    <method name="validExpiryDate" start="446" end="448" abstract="false" final="false" static="false" visibility="public">
      <docblock>
        <description/>
        <todo value=": finish!">valid expiry date</todo>
        <param description="| Int $number" type="object">
          <type full="String" namespace="" name="String"/>
        </param>
        <return type="object">
          <type full="Boolean" namespace="" name="Boolean"/>
        </return>
      </docblock>
      <parameter name="number" byreference="false" type="{unknown}"/>
    </method>
    <method name="validCVC" start="457" end="459" abstract="false" final="false" static="false" visibility="public">
      <docblock>
        <description/>
        <todo value=": finish!">valid CVC number</todo>
        <param description="| Int $number" type="object">
          <type full="String" namespace="" name="String"/>
        </param>
        <return type="object">
          <type full="Boolean" namespace="" name="Boolean"/>
        </return>
      </docblock>
      <parameter name="number" byreference="false" type="{unknown}"/>
    </method>
    <method name="debug" start="466" end="469" abstract="false" final="false" static="false" visibility="public">
      <docblock>
        <description compact="Debug helper method.">Access through : /shoppingcart/debug/</description>
      </docblock>
    </method>
  </parent>
  <extender full="EcommercePayment_TestSuccess" namespace="" name="EcommercePayment_TestSuccess"/>
  <extender full="EcommercePayment_TestPending" namespace="" name="EcommercePayment_TestPending"/>
  <extender full="EcommercePayment_TestFailure" namespace="" name="EcommercePayment_TestFailure"/>
</class>
