(function(e,t,n){function G(n,r,i){var o=t.createElement(n);if(r){o.id=s+r}if(i){o.style.cssText=i}return e(o)}function Y(e){var t=T.length,n=(U+e)%t;return n<0?t+n:n}function Z(e,t){return Math.round((/%/.test(e)?(t==="x"?tt():nt())/100:1)*parseInt(e,10))}function et(e){return B.photo||/\.(gif|png|jp(e|g|eg)|bmp|ico)((#|\?).*)?$/i.test(e)}function tt(){return n.innerWidth||N.width()}function nt(){return n.innerHeight||N.height()}function rt(){var t,n=e.data(R,i);if(n==null){B=e.extend({},r);if(console&&console.log){console.log("Error: cboxElement missing settings object")}}else{B=e.extend({},n)}for(t in B){if(e.isFunction(B[t])&&t.slice(0,2)!=="on"){B[t]=B[t].call(R)}}B.rel=B.rel||R.rel||e(R).data("rel")||"nofollow";B.href=B.href||e(R).attr("href");B.title=B.title||R.title;if(typeof B.href==="string"){B.href=e.trim(B.href)}}function it(t,n){e.event.trigger(t);if(n){n.call(R)}}function st(){var e,t=s+"Slideshow_",n="click."+s,r,i,o;if(B.slideshow&&T[1]){r=function(){M.text(B.slideshowStop).unbind(n).bind(f,function(){if(B.loop||T[U+1]){e=setTimeout(J.next,B.slideshowSpeed)}}).bind(a,function(){clearTimeout(e)}).one(n+" "+l,i);g.removeClass(t+"off").addClass(t+"on");e=setTimeout(J.next,B.slideshowSpeed)};i=function(){clearTimeout(e);M.text(B.slideshowStart).unbind([f,a,l,n].join(" ")).one(n,function(){J.next();r()});g.removeClass(t+"on").addClass(t+"off")};if(B.slideshowAuto){r()}else{i()}}else{g.removeClass(t+"off "+t+"on")}}function ot(t){if(!V){R=t;rt();T=e(R);U=0;if(B.rel!=="nofollow"){T=e("."+o).filter(function(){var t=e.data(this,i),n;if(t){n=e(this).data("rel")||t.rel||this.rel}return n===B.rel});U=T.index(R);if(U===-1){T=T.add(R);U=T.length-1}}if(!W){W=X=true;g.show();if(B.returnFocus){e(R).blur().one(c,function(){e(this).focus()})}m.css({opacity:+B.opacity,cursor:B.overlayClose?"pointer":"auto"}).show();B.w=Z(B.initialWidth,"x");B.h=Z(B.initialHeight,"y");J.position();if(d){N.bind("resize."+v+" scroll."+v,function(){m.css({width:tt(),height:nt(),top:N.scrollTop(),left:N.scrollLeft()})}).trigger("resize."+v)}it(u,B.onOpen);H.add(A).hide();P.html(B.close).show()}J.load(true)}}function ut(){if(!g&&t.body){Q=false;N=e(n);g=G(K).attr({id:i,"class":p?s+(d?"IE6":"IE"):""}).hide();m=G(K,"Overlay",d?"position:absolute":"").hide();L=G(K,"LoadingOverlay").add(G(K,"LoadingGraphic"));y=G(K,"Wrapper");b=G(K,"Content").append(C=G(K,"LoadedContent","width:0; height:0; overflow:hidden"),A=G(K,"Title"),O=G(K,"Current"),_=G(K,"Next"),D=G(K,"Previous"),M=G(K,"Slideshow").bind(u,st),P=G(K,"Close"));y.append(G(K).append(G(K,"TopLeft"),w=G(K,"TopCenter"),G(K,"TopRight")),G(K,false,"clear:left").append(E=G(K,"MiddleLeft"),b,S=G(K,"MiddleRight")),G(K,false,"clear:left").append(G(K,"BottomLeft"),x=G(K,"BottomCenter"),G(K,"BottomRight"))).find("div div").css({"float":"left"});k=G(K,false,"position:absolute; width:9999px; visibility:hidden; display:none");H=_.add(D).add(O).add(M);e(t.body).append(m,g.append(y,k))}}function at(){if(g){if(!Q){Q=true;j=w.height()+x.height()+b.outerHeight(true)-b.height();F=E.width()+S.width()+b.outerWidth(true)-b.width();I=C.outerHeight(true);q=C.outerWidth(true);g.css({"padding-bottom":j,"padding-right":F});_.click(function(){J.next()});D.click(function(){J.prev()});P.click(function(){J.close()});m.click(function(){if(B.overlayClose){J.close()}});e(t).bind("keydown."+s,function(e){var t=e.keyCode;if(W&&B.escKey&&t===27){e.preventDefault();J.close()}if(W&&B.arrowKey&&T[1]){if(t===37){e.preventDefault();D.click()}else if(t===39){e.preventDefault();_.click()}}});e("."+o,t).live("click",function(e){if(!(e.which>1||e.shiftKey||e.altKey||e.metaKey)){e.preventDefault();ot(this)}})}return true}return false}var r={transition:"elastic",speed:300,width:false,initialWidth:"600",innerWidth:false,maxWidth:false,height:false,initialHeight:"450",innerHeight:false,maxHeight:false,scalePhotos:true,scrolling:true,inline:false,html:false,iframe:false,fastIframe:true,photo:false,href:false,title:false,rel:false,opacity:.9,preloading:true,current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",open:false,returnFocus:true,reposition:true,loop:true,slideshow:false,slideshowAuto:true,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",onOpen:false,onLoad:false,onComplete:false,onCleanup:false,onClosed:false,overlayClose:true,escKey:true,arrowKey:true,top:false,bottom:false,left:false,right:false,fixed:false,data:undefined},i="colorbox",s="cbox",o=s+"Element",u=s+"_open",a=s+"_load",f=s+"_complete",l=s+"_cleanup",c=s+"_closed",h=s+"_purge",p=!e.support.opacity&&!e.support.style,d=p&&!n.XMLHttpRequest,v=s+"_IE6",m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K="div",Q;if(e.colorbox){return}e(ut);J=e.fn[i]=e[i]=function(t,n){var s=this;t=t||{};ut();if(at()){if(!s[0]){if(s.selector){return s}s=e("<a/>");t.open=true}if(n){t.onComplete=n}s.each(function(){e.data(this,i,e.extend({},e.data(this,i)||r,t))}).addClass(o);if(e.isFunction(t.open)&&t.open.call(s)||t.open){ot(s[0])}}return s};J.position=function(e,t){function f(e){w[0].style.width=x[0].style.width=b[0].style.width=e.style.width;b[0].style.height=E[0].style.height=S[0].style.height=e.style.height}var n,r=0,i=0,o=g.offset(),u,a;N.unbind("resize."+s);g.css({top:-9e4,left:-9e4});u=N.scrollTop();a=N.scrollLeft();if(B.fixed&&!d){o.top-=u;o.left-=a;g.css({position:"fixed"})}else{r=u;i=a;g.css({position:"absolute"})}if(B.right!==false){i+=Math.max(tt()-B.w-q-F-Z(B.right,"x"),0)}else if(B.left!==false){i+=Z(B.left,"x")}else{i+=Math.round(Math.max(tt()-B.w-q-F,0)/2)}if(B.bottom!==false){r+=Math.max(nt()-B.h-I-j-Z(B.bottom,"y"),0)}else if(B.top!==false){r+=Z(B.top,"y")}else{r+=Math.round(Math.max(nt()-B.h-I-j,0)/2)}g.css({top:o.top,left:o.left});e=g.width()===B.w+q&&g.height()===B.h+I?0:e||0;y[0].style.width=y[0].style.height="9999px";n={width:B.w+q,height:B.h+I,top:r,left:i};if(e===0){g.css(n)}g.dequeue().animate(n,{duration:e,complete:function(){f(this);X=false;y[0].style.width=B.w+q+F+"px";y[0].style.height=B.h+I+j+"px";if(B.reposition){setTimeout(function(){N.bind("resize."+s,J.position)},1)}if(t){t()}},step:function(){f(this)}})};J.resize=function(e){if(W){e=e||{};if(e.width){B.w=Z(e.width,"x")-q-F}if(e.innerWidth){B.w=Z(e.innerWidth,"x")}C.css({width:B.w});if(e.height){B.h=Z(e.height,"y")-I-j}if(e.innerHeight){B.h=Z(e.innerHeight,"y")}if(!e.innerHeight&&!e.height){C.css({height:"auto"});B.h=C.height()}C.css({height:B.h});J.position(B.transition==="none"?0:B.speed)}};J.prep=function(t){function o(){B.w=B.w||C.width();B.w=B.mw&&B.mw<B.w?B.mw:B.w;return B.w}function u(){B.h=B.h||C.height();B.h=B.mh&&B.mh<B.h?B.mh:B.h;return B.h}if(!W){return}var n,r=B.transition==="none"?0:B.speed;C.remove();C=G(K,"LoadedContent").append(t);C.hide().appendTo(k.show()).css({width:o(),overflow:B.scrolling?"auto":"hidden"}).css({height:u()}).prependTo(b);k.hide();e(z).css({"float":"none"});if(d){e("select").not(g.find("select")).filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one(l,function(){this.style.visibility="inherit"})}n=function(){function y(){if(p){g[0].style.removeAttribute("filter")}}var t,n,o=T.length,u,a="frameBorder",l="allowTransparency",c,d,v,m;if(!W){return}c=function(){clearTimeout($);L.detach().hide();it(f,B.onComplete)};if(p){if(z){C.fadeIn(100)}}A.html(B.title).add(C).show();if(o>1){if(typeof B.current==="string"){O.html(B.current.replace("{current}",U+1).replace("{total}",o)).show()}_[B.loop||U<o-1?"show":"hide"]().html(B.next);D[B.loop||U?"show":"hide"]().html(B.previous);if(B.slideshow){M.show()}if(B.preloading){t=[Y(-1),Y(1)];while(n=T[t.pop()]){m=e.data(n,i);if(m&&m.href){d=m.href;if(e.isFunction(d)){d=d.call(n)}}else{d=n.href}if(et(d)){v=new Image;v.src=d}}}}else{H.hide()}if(B.iframe){u=G("iframe")[0];if(a in u){u[a]=0}if(l in u){u[l]="true"}u.name=s+ +(new Date);if(B.fastIframe){c()}else{e(u).one("load",c)}u.src=B.href;if(!B.scrolling){u.scrolling="no"}e(u).addClass(s+"Iframe").appendTo(C).one(h,function(){u.src="//about:blank"})}else{c()}if(B.transition==="fade"){g.fadeTo(r,1,y)}else{y()}};if(B.transition==="fade"){g.fadeTo(r,0,function(){J.position(0,n)})}else{J.position(r,n)}};J.load=function(t){var n,r,i=J.prep;X=true;z=false;R=T[U];if(!t){rt()}it(h);it(a,B.onLoad);B.h=B.height?Z(B.height,"y")-I-j:B.innerHeight&&Z(B.innerHeight,"y");B.w=B.width?Z(B.width,"x")-q-F:B.innerWidth&&Z(B.innerWidth,"x");B.mw=B.w;B.mh=B.h;if(B.maxWidth){B.mw=Z(B.maxWidth,"x")-q-F;B.mw=B.w&&B.w<B.mw?B.w:B.mw}if(B.maxHeight){B.mh=Z(B.maxHeight,"y")-I-j;B.mh=B.h&&B.h<B.mh?B.h:B.mh}n=B.href;$=setTimeout(function(){L.show().appendTo(b)},100);if(B.inline){G(K).hide().insertBefore(e(n)[0]).one(h,function(){e(this).replaceWith(C.children())});i(e(n))}else if(B.iframe){i(" ")}else if(B.html){i(B.html)}else if(et(n)){e(z=new Image).addClass(s+"Photo").error(function(){B.title=false;i(G(K,"Error").html(B.imgError))}).load(function(){var e;z.onload=null;if(B.scalePhotos){r=function(){z.height-=z.height*e;z.width-=z.width*e};if(B.mw&&z.width>B.mw){e=(z.width-B.mw)/z.width;r()}if(B.mh&&z.height>B.mh){e=(z.height-B.mh)/z.height;r()}}if(B.h){z.style.marginTop=Math.max(B.h-z.height,0)/2+"px"}if(T[1]&&(B.loop||T[U+1])){z.style.cursor="pointer";z.onclick=function(){J.next()}}if(p){z.style.msInterpolationMode="bicubic"}setTimeout(function(){i(z)},1)});setTimeout(function(){z.src=n},1)}else if(n){k.load(n,B.data,function(t,n,r){i(n==="error"?G(K,"Error").html(B.xhrError):e(this).contents())})}};J.next=function(){if(!X&&T[1]&&(B.loop||T[U+1])){U=Y(1);J.load()}};J.prev=function(){if(!X&&T[1]&&(B.loop||U)){U=Y(-1);J.load()}};J.close=function(){if(W&&!V){V=true;W=false;it(l,B.onCleanup);N.unbind("."+s+" ."+v);m.fadeTo(200,0);g.stop().fadeTo(300,0,function(){g.add(m).css({opacity:1,cursor:"auto"}).hide();it(h);C.remove();setTimeout(function(){V=false;it(c,B.onClosed)},1)})}};J.remove=function(){e([]).add(g).add(m).remove();g=null;e("."+o).removeData(i).removeClass(o).die()};J.element=function(){return e(R)};J.settings=r})(jQuery,document,this)
